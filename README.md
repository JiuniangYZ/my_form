# vue_eform

### 运行 
```
npm install
npm run dev
```

### 使用说明
- 表格分为三种模式，cell编辑模式，双击某个单元格进入此模式。普通模式，可以使用快捷键。命令模式，可以输入指令进行复杂操作。
- 引入一部分VIM的快捷键，现在已经实现的有dd:删除当前行并将当前行放入剪贴板,yy:复制当前行,p将剪贴板中的行复制并插入当前行,u:撤销上次操作。快捷键仅在普通模式下有效。
- 在任何模式下用esc均可返回普通模式。（假装你正在使用VIM）
- 快捷键不支持列操作，可使用列头单元格向下箭头的弹出菜单进行操作，包括删除列，按列排序和插入一列。
- 所有的操作均可在普通模式下用u撤回。

### 命令模式说明
- 和vim一样，在普通模式下按':'进入命令模式。
- 命令模式遵循一种非常简单的DSL, 总的范式为 position <- exp。
- position即一个代表位置的左值, 例如第1行为@1，第a列为$a，a列1行为#a1。
- exp支持位置引用右值（见上一条），函数调用（现在支持三种函数即min, max和ave)，和数字的字面值（不支持负数，但是支持加减乘除），优先级为函数调用>括号>乘除>加减有更高的优先级，每个值分行/列/数字三种类型，相同类型之间的运算类型不变，行与列与数字进行会进行广播运算（常见于面向向量或的编程语言如R），例如$a + 3会得到一列，其每个值均为a中相应值与字面值3的和，3/@1会得到一行，其每个值为3除以第一行每个相应值得到的商。现在提供的三种函数可以以行或者列为参数，返回值为一个数字。
- 执行命令会将 <- 右侧exp得到的值赋值给左侧的位置引用，同样遵循传播原则，你可以把数字赋值给一个单元格，也可以把一行赋值给一行，也可以吧一个数字赋值给一整列（实际上就是把这一列的每一个单元格的数字都变成这个数字），但是你不能把一行赋值给一列或者把一列赋值给一个单元格，因为这样的行为没有明确的符合直觉的语义，即便有可能一行和一列的长度是相等的。
- 命令模式的操作同样可以使用u进行撤销。
- 如果单元格里面的值不能被解释为一个数字，那么在运算的时候会被作为0看待。

### 一些简单的例子 
```
$a <- $b + 1 //把列b每一个值加上1然后赋值给列a
$b <- 1 + $a/max(@2) //列a的每个值除以行2的最大值然后加上1并赋值给列b
```